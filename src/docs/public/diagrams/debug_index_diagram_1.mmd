graph TB
    subgraph 'Frontend Layer'
        UI[React UI]
        WS[WebSocket Client]
    end
    
    subgraph 'API Layer'
        API[FastAPI Server]
        WSS[WebSocket Server]
        AUTH[Authentication]
    end
    
    subgraph 'Core System'
        AF[Agent Factory]
        MM[Memory Manager]
        MCP[MCP Manager]
    end
    
    subgraph 'AI Components'
        TOT[Tree of Thought]
        RAG[RAG System]
        EMBED[Embedding Service]
    end
    
    subgraph 'Storage Layer'
        DB[(PostgreSQL)]
        VECTOR[(Vector Store)]
        FILES[(File Storage)]
    end
    
    UI --> API
    WS --> WSS
    API --> AF
    WSS --> MM
    AF --> TOT
    AF --> RAG
    RAG --> EMBED
    MM --> VECTOR
    API --> DB
    
    style UI fill:#e1f5fe
    style API fill:#f3e5f5
    style AF fill:#e8f5e8
    style TOT fill:#fff3e0
    style RAG fill:#fff3e0